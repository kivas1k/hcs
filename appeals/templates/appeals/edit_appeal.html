{% extends "base.html" %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è #{{ appeal.id }} ‚Äî –ñ–ö–• –°–µ—Ä–≤–∏—Å{% endblock %}

{% block content %}
<div class="auth-form create-appeal">
  {% if messages %}
  <div class="alert alert-success">
    <span class="alert-icon">‚úÖ</span>
    <div class="alert-content">
      {% for message in messages %}
        {{ message }}
      {% endfor %}
    </div>
    <a href="{% url 'appeals:my_appeals' %}" class="btn btn-outline">
      ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É
    </a>
  </div>
  {% endif %}

  <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è #{{ appeal.id }}</h2>
  <form method="post" enctype="multipart/form-data" class="appeal-form">
    {% csrf_token %}

    <div class="form-group card-style">
      <label for="{{ appeal_form.title.id_for_label }}">üìå –ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
      {{ appeal_form.title }}
      {{ appeal_form.title.errors }}
    </div>

    <div class="form-group card-style">
      <label for="{{ appeal_form.description.id_for_label }}">üìù –û–ø–∏—Å–∞–Ω–∏–µ</label>
      {{ appeal_form.description }}
      {{ appeal_form.description.errors }}
    </div>

    <div class="form-group card-style">
  <label>üè∑ –¢–µ–≥–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
  <div class="tags-container">
    {{ appeal_form.tags }}
  </div>
  {{ appeal_form.tags.errors }}
</div>


    {% if documents %}
    <div class="form-group card-style">
      <label>üìé –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</label>
      <div class="document-list">
        {% for document in documents %}
          <div class="document-item">
            <a href="{{ document.file.url }}" target="_blank" class="document-link">
              {{ document.file.name|slice:"15:"|truncatechars:30 }}
            </a>
            <a href="{% url 'appeals:delete_document' document.id %}"
               class="document-delete"
               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç?')">‚úñ</a>
          </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <div class="form-group card-style file-upload">
      <label>üìé –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</label>
      <div class="upload-area">
        <svg width="40" height="40" viewBox="0 0 24 24" class="upload-icon">
          <path fill="var(--primary)" d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
          <path fill="var(--primary)" d="M16 13h-3V10h-2v3H8l4 4 4-4z"/>
        </svg>
        <span class="upload-text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</span>
        <input type="file" name="files" multiple class="file-input">
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary submit-btn">
        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
      </button>
      <a href="{% url 'appeals:appeal_detail' appeal.id %}" class="btn btn-outline">
        –û—Ç–º–µ–Ω–∞
      </a>
    </div>
  </form>
</div>
{% endblock %}